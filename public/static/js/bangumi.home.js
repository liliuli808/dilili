!function(e){function a(i){if(t[i])return t[i].exports;var n=t[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}var t={};return a.m=e,a.c=t,a.p="",a(0)}([function(e,exports,a){function t(e){e.each(function(e,a){var t=$(a);Math.abs(180-t.width())<=2&&180!=t.width()&&t.css("width",180)})}function i(e,a){function t(e,a){var t=$('[area="'+e+'"]');if(0!=t.length){var l=i[e]={tid:e,area:t,MAIN_TIDS:n,panes:{}};r(e,l,a),s(e,l,a)}}var i={},n=[13];if("undefined"==typeof a)var a=[parseInt(e)];for(var l=0;l<a.length;l++)t(a[l],parseInt(e));p.load(i)}function n(e,a){for(var t in a)e[t]=a[t];return e}function r(e,a,t){var i=4==d[tid].idLibs[e].rankSize?"renderIndexRanking":"renderSubRanking",n=a.area.find(".rlist");a.panes.ranking={wrapper:".b-r",dataContainer:n.length>0?n:'<ul class="rlist"></ul>',render:i,pagesize:d[tid].idLibs[e].rankSize},a.panes.ranking.type="hot";var r={wrapper:'<div class="right"></div>',selected:0};return a.panes.ranking.selector=CreateArea.createRankingSelect(e,r),a.panes.ranking.selectorTarget=".b-head",a.panes.ranking.selectChange="selectChange",32==e&&(a.panes.ranking.selectorTarget=".b-head.ranking"),a}function s(e,a){var t=d[tid].idLibs[e],i=t.renderTypeNew?t.renderTypeNew:"renderSubList",n=32==e?20:15,r="//api.bilibili.com/x/web-interface/dynamic/region?jsonp=jsonp&ps="+n+"&rid="+e,s="//api.bilibili.com/x/web-interface/newlist?jsonp=jsonp&ps="+n+"&rid="+e,l=' data-jsonp="subListCallback_'+c++ +'"',o='<ul class="b-slt-tab">\t                <li class="on" data-source="'+r+'"'+l+'>有新动态</li>\t                <li type="newv" data-source="'+s+'"'+l+">最新投稿</li>\t            </ul>";return a.panes.newv={wrapper:".b-l",dataContainer:a.area.find(".v-list"),render:i,pagesize:t.pageSize,tab:t.push===!1?"":o,tabTarget:".b-head .b-head-l",tabChange:function(e){var a=e.tab.find("li.on");"undefined"!=typeof a.attr("loaded")&&"undefined"==typeof e._super.data[a.attr("data-source")]&&(e._super.data[a.attr("data-source")]=e.dataContainer.clone()),e._super.tabChange(e)},push:t.push!==!1||t.push},32==e&&(a.panes.newv.pagesize=20),a}function l(){for(var e={},a={endrecommen:{dataSource:"/jsonp/static/"+d[tid].promoteJsonId+".ver",dataContainer:".r-list-pmt",render:"renderBangumiPromote"}},t={zoneMap:["32"],zoneRender:{32:{area:$(".container-row[area=32]"),params:a.endrecommen,customParams:{wrapper:".b-r",dataContainer:$(".container-row[area=32]").find(".r-list-pmt.simple"),pagesize:2}}}},i=0;i<t.zoneMap.length;i++){var r=t.zoneMap[i],s=t.zoneRender[r];if(s&&0!=s.area.length){var l=e["promote_"+tid+"_"+r]={area:s.area,panes:{}},o=l.panes["pane_"+tid+"_"+r]={dataSource:"/index/promote/"+parseInt(r)+".json"};n(o,s.params),"undefined"!=typeof s.customParams&&n(o,s.customParams),l.area.find($(o.dataContainer)).length>0&&(o.dataContainer=l.area.find(o.dataContainer))}}p.load(e)}a(12),a(13),a(4);var o=a(15);a(17),window.lazyImage=new LazyImage,window.picSizeBFS={baseSize:{width:"320",height:"200"},rightSmallSize:{width:"80",height:"50"},finalRecomSize:{width:"120",height:"166"},lastUpdateSize:{width:"144",height:"144"},topSliderSize:{width:"620",height:"300"},topSliderSmallSize:{width:"50",height:"38"}};var d={13:{bannerJsonId:34,staticJsonId:35,promoteJsonId:36,idLibs:{33:{readmoreUrl:"//www.bilibili.com/video/bangumi-two-1.html",rankSize:10,pageSize:15},32:{readmoreUrl:"//www.bilibili.com/video/part-twoelement-1.html",rankSize:8,pageSize:15},51:{readmoreUrl:"//www.bilibili.com/video/douga-else-information-1.html",rankSize:10,pageSize:15},152:{readmoreUrl:"//www.bilibili.com/video/douga-else-information-1.html",rankSize:10,pageSize:15}}},167:{bannerJsonId:102,staticJsonId:103,specialShortList:169,idLibs:{153:{readmoreUrl:"http://www.bilibili.com/video/bangumi_chinese_1.html",rankSize:10,pageSize:15},168:{readmoreUrl:"http://www.bilibili.com/video/guochuang-fanvid-1.html",rankSize:10,pageSize:15},169:{renderTypeNew:"renderPuppetry",readmoreUrl:"http://www.bilibili.com/video/glove-puppetry-1.html",rankSize:4,pageSize:6,push:!1},170:{readmoreUrl:"http://www.bilibili.com/video/guochuang-offical-1.html",rankSize:10,pageSize:15}}}};!function(){function e(){window.jsonpRegionDynamic=function(e){if(0===e.code){window.pushData=e.data;for(var a=0;a<window.pushRefreshFunctions.length;a++)window.pushRefreshFunctions[a](e.data)}},$.ajax({url:"//api.bilibili.com/x/web-interface/dynamic/total?jsonp=jsonp&callback=jsonpRegionDynamic",cache:!0,dataType:"script"})}window.pushRefreshFunctions=[],e(),window.pushTimer=setInterval(e,5e3)}();var p={pageModules:[],lazyQueue:[],pageBlocks:{},delayTimer:null,load:function(e,a){var t=this,i={},n={},r=[];if("undefined"!=typeof a&&"undefined"!=typeof a.nav){var s=a.nav;r=s.seq}for(var l in e){var o=e[l],d=l;if("undefined"!=typeof a)for(var p in a)o[p]=a[p];i[d]=n[d]=this.create(d,o)}r&&r.length&&this.sort(i,r,!0),"undefined"!=typeof s&&s.setPosition();var c=this.pageModules.push(i)-1;return this.lazyQueue.push(n),this.lazy(n,c,s),$(window).on("scroll.lazyPage_"+c,function(){t.lazy(n,c,s)}),i},create:function(e,a){var a=a||{};if(a.name=a.name||e,a.create)var t=a.create;else var t=new CreateArea(a);return t.init(),this.pageBlocks[e]=t,t},sort:function(e,a,t){var i;if(e&&a&&a.length>0)for(i=0;i<a.length;i++)i>0&&e[a[i]]&&e[a[i]].area&&e[a[i]].area.insertAfter(e[a[i-1]].area);t!==!0&&$(window).trigger("onNavigatorChange")},lazy:function(e,a,t){var i=this,n=arguments;setTimeout(function(){if("undefined"==typeof t||1!=t.scrolling||$(window).scrollTop()+$(window).height()==$(document).height()||0==$(window).scrollTop())if(n.length<=1){for(var r=0;r<i.lazyQueue.length;r++)i._lazy(i.lazyQueue[r],r);for(var s=0;s<i.pageModules.length;s++)$.each(i.pageModules[s],function(e,a){i._inSight(a)&&lazyImage.lazy(a.area)})}else i._lazy(e,a)},1)},_lazy:function(e,a){var t=this;if(e){var i=0;$.each(e,function(a,n){t._inSight(n)&&!n.complete?(n.create?n.create(n.params.dataSource):n.load(n.params.panes),n=null,delete e[a]):n.complete&&(n=null,delete e[a]),i++}),0==i&&(e=null,this.lazyQueue[a]=null,$(window).off("scroll.lazyPage_"+a))}},_inSight:function(e){var a=$(window).height()/2;return $(window).scrollTop()+a>=e.area.offset().top-$(window).height()&&$(window).scrollTop()-a<=e.area.offset().top+e.area.height()}};window.createBanner=function(e,a){var t={parent:".container-top .b-topic",wrapper:$('<div class="topic-preview-wrapper ex ex-s"><div class="topic-preview-list-wrapper"><ul class="topic-preview"></ul></div><div class="s-bottom-wrapper"><div class="s-bottom"><div class="title"></div></div></div></div>'),item:'<li><a target="_blank"><img /></a></li>',bar:$('<ul id="topic_slider" class="slider-bar"></ul>'),barContainer:".s-bottom",barItem:"<li></li>",dataSrc:"/jsonp/slideshow/"+d[e].bannerJsonId+".ver"},i={"data-loc-id":a&&a.loc_id||"","data-id":a&&a.id||""};n(t,{mode:"hover",initCallback:function(e,a){$(".title",e).appendTo(e.find(".s-bottom"));$('<li class="current"></li>').appendTo(e.find(".slider-bar"))},renderCallback:function(e,t,n,r,s){var l=$('<span><a href="'+httpsChk(t.link)+'" title="'+t.title+'" target="_blank">'+t.title+"</a></span>").appendTo($(".title",e));if($("[preview] img",e).eq(n).attr("alt",t.title),0==n&&l.show(),$(".topic-preview li",e).eq(1).attr(i),$(".title a",e).eq(1).attr(i),a&&1==n&&a.is_ad_loc){var o=l.find("a")||null;a.is_ad&&o.prepend('<img src="//static.hdslb.com/images/base/web_banner_logo.png" style="width:32px;height:20px;" />'),o.attr({"data-target-url":t.link||"",href:s||t.link||""})}},barRenderCallback:function(e,t,n,r){var s=null,l=httpsChk(t.link)||"";1===n&&e&&e.attr(i),s=1===n&&a.is_ad_loc?$('<a data-target-url="'+l+'" href="'+(r||l||"")+'" title="'+t.title+'" target="_blank"></a>').appendTo(e):$('<a href="'+l+'" title="'+t.title+'" target="_blank"></a>').appendTo(e),s&&s.html('<img src="'+httpsChk(t.simg)+'" alt="'+(t.title||"")+'" /><div class="mask"></div>')},slideCallback:function(e,a){$(".title span",e).hide(),$(".title",e).find("span:eq("+a+")").fadeIn(300);var t=e.find(".slider-bar");if(0==$(".current",t).length)var i=$('<li class="current"></li>').appendTo(t);else var i=$(".current",t);var n=t.find("li[bar]:eq("+a+")"),r=n.position().left+parseInt(n.css("margin-left"))-parseInt(i.css("border-left-width"));i.css("left",r);var s=e.find("li:eq("+a+")").data("loc-id");s&&o.ad_show(s)}}),p.load({topArea:{area:$(".container-top"),panes:{list:{bodyClass:".container-top-sub",dataContainer:'<ul class="top-list sub hotspot"></ul>',dataSource:"/jsonp/static/"+d[e].staticJsonId+".ver",pagesize:6,render:"renderBangumiHotspot",pageOpt:d[e]}}}});var r=new SliderController(t);r.init(),r.load=function(e,t){var i,n=this.params,r=window.BiliCm&&window.BiliCm.base||{};if(i=n.onLoad?n.onLoad(e):e.list?e.list:e.result){a&&a.link&&i.splice(1,0,a);for(var s in i)if(i[s].img=bfsImage(i[s].img,picSizeBFS.topSliderSize.width,picSizeBFS.topSliderSize.height),i[s].simg=bfsImage(i[s].simg,picSizeBFS.topSliderSmallSize.width,picSizeBFS.topSliderSmallSize.height),"object"==typeof i[s]&&(n.onData&&n.onData(i[s])!==!1||!n.onData))if(1===+s&&a.is_ad_loc){var l=$.extend({},window.adDatasLoc[a.loc_id]||{},{url:i[s].link||""}),o=i[s].link?r&&$.isFunction(r.getSyncUrl)?r.getSyncUrl(l,a.loc_id):l.url:"javascript:void(0);";this.add(i[s],void 0,o)}else this.add(i[s])}if(0==this.length){$('<li class="no-data">没有数据</li>').appendTo(this.container);this.bar.hide()}$("[bar]:eq(0)",this.bar).addClass("on"),this.setTimer(),n.initCallback&&n.initCallback(this.wrapper,e)}};var c=0;Date.prototype.toYMD=function(){var e,a,t;return e=String(this.getFullYear()),a=String(this.getMonth()+1),1==a.length&&(a="0"+a),t=String(this.getDate()),1==t.length&&(t="0"+t),e+"-"+a+"-"+t},$(function(){if("167"==tid){var e="b-guochuang";$(".b-page-body").addClass(e)}}),t($(".vidbox.v-list.sub img")),i(tid,sub_tids),l()},,function(e,exports,a){"use strict";function t(e){return null!=e&&""!==e}function i(e){return(Array.isArray(e)?e.map(i):e&&"object"==typeof e?Object.keys(e).filter(function(a){return e[a]}):[e]).filter(t).join(" ")}function n(e){return s[e]||e}function r(e){var a=String(e).replace(l,n);return a===""+e?e:a}exports.merge=function o(e,a){if(1===arguments.length){for(var i=e[0],n=1;n<e.length;n++)i=o(i,e[n]);return i}var r=e["class"],s=a["class"];(r||s)&&(r=r||[],s=s||[],Array.isArray(r)||(r=[r]),Array.isArray(s)||(s=[s]),e["class"]=r.concat(s).filter(t));for(var l in a)"class"!=l&&(e[l]=a[l]);return e},exports.joinClasses=i,exports.cls=function(e,a){for(var t=[],n=0;n<e.length;n++)a&&a[n]?t.push(exports.escape(i([e[n]]))):t.push(i(e[n]));var r=i(t);return r.length?' class="'+r+'"':""},exports.style=function(e){return e&&"object"==typeof e?Object.keys(e).map(function(a){return a+":"+e[a]}).join(";"):e},exports.attr=function(e,a,t,i){return"style"===e&&(a=exports.style(a)),"boolean"==typeof a||null==a?a?" "+(i?e:e+'="'+e+'"'):"":0==e.indexOf("data")&&"string"!=typeof a?(JSON.stringify(a).indexOf("&")!==-1&&console.warn("Since Jade 2.0.0, ampersands (`&`) in data attributes will be escaped to `&amp;`"),a&&"function"==typeof a.toISOString&&console.warn("Jade will eliminate the double quotes around dates in ISO form after 2.0.0")," "+e+"='"+JSON.stringify(a).replace(/'/g,"&apos;")+"'"):t?(a&&"function"==typeof a.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+exports.escape(a)+'"'):(a&&"function"==typeof a.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+a+'"')},exports.attrs=function(e,a){var t=[],n=Object.keys(e);if(n.length)for(var r=0;r<n.length;++r){var s=n[r],l=e[s];"class"==s?(l=i(l))&&t.push(" "+s+'="'+l+'"'):t.push(exports.attr(s,l,!1,a))}return t.join("")};var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},l=/[&<>"]/g;exports.escape=r,exports.rethrow=function d(e,t,i,n){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&t||n))throw e.message+=" on line "+i,e;try{n=n||a(3).readFileSync(t,"utf8")}catch(r){d(e,null,i)}var s=3,l=n.split("\n"),o=Math.max(i-s,0),p=Math.min(l.length,i+s),s=l.slice(o,p).map(function(e,a){var t=a+o+1;return(t==i?"  > ":"    ")+t+"| "+e}).join("\n");throw e.path=t,e.message=(t||"Jade")+":"+i+"\n"+s+"\n\n"+e.message,e},exports.DebugItem=function(e,a){this.lineno=e,this.filename=a}},function(e,exports){},function(e,exports){var a={version:function(){var e=navigator.userAgent;navigator.appVersion;return{trident:/Trident/i.test(e),presto:/Presto/i.test(e),webKit:/AppleWebKit/i.test(e),gecko:/Gecko/i.test(e)&&!/KHTML/i.test(e),mobile:/AppleWebKit.*Mobile.*/i.test(e),ios:/\(i[^;]+;( U;)? CPU.+Mac OS X/i.test(e),android:/Android/i.test(e)||/Linux/i.test(e),windowsphone:/Windows Phone/i.test(e),iPhone:/iPhone/i.test(e),iPad:/iPad/i.test(e),MicroMessenger:/MicroMessenger/i.test(e),webApp:!/Safari/i.test(e),edge:/edge/i.test(e)}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()};window.SliderController=function(e){this.params=$.extend(!0,{mode:"click"},e),this._mouseIn=!1},window.SliderController.prototype={pointer:0,length:0,timer:null,init:function(){var e=this,a=this.params;$(a.parent).find(".p-loading").length>0?this.loading=$(a.parent).find(".p-loading"):this.loading=$('<div class="p-loading"></div>'),this.wrapper=$(a.wrapper).appendTo($(a.parent)),this.container=this.wrapper.find("ul").eq(0),this.bar=$(a.bar),a.barContainer?this.bar.appendTo(this.wrapper.find(a.barContainer)):this.bar.appendTo(this.wrapper),a.dataSrc&&(0==$(a.parent).find(".p-loading").length&&this.loading.appendTo(this.wrapper),"string"==typeof a.dataSrc?$.getJSON(a.dataSrc,function(a){e.loading.remove(),e.load(a)}):"object"==typeof a.dataSrc&&(this.loading.remove(),this.load(a.dataSrc)))},load:function(e){var a,t=this.params;if(a=t.onLoad?t.onLoad(e):e.list?e.list:e.result)for(var i in a)"object"==typeof a[i]&&(t.onData&&t.onData(a[i])!==!1||!t.onData)&&this.add(a[i]);if(0==this.length){$('<li class="no-data">没有数据</li>').appendTo(this.container);this.bar.hide()}else 1==this.length&&this.bar.hide();$("[bar]:eq(0)",this.bar).addClass("on"),this.setTimer(),t.initCallback&&t.initCallback(this.wrapper,e)},add:function(e,a,t){var i=this.params,n=100*this.length,r=$(i.barItem);r.appendTo(this.bar).attr("bar","bar");var s=this.length;0==this.length&&r.addClass("on"),i.barRenderCallback&&i.barRenderCallback(r,e,s,t);var l;"function"==typeof i.item?l=i.item(e,s):(l=$(i.item),$("img",l).attr("src",httpsChk(e.img)),1===s&&t?$("a",l).attr({"data-target-url":httpsChk(e.link)||"",href:t||httpsChk(e.link)||""}):$("a",l).attr("href",httpsChk(e.link))),l.attr("preview","preview"),l.appendTo(this.container),i.renderCallback&&i.renderCallback(this.wrapper,e,s,l,t),this.bindBarEvent(r),this.bindPreviewEvent(l),n+=100,this.length++,this.container.width(n+"%"),"undefined"!=typeof a&&a(this.wrapper,e)},bind:function(){var e=this.params;this.wrapper=$(e.wrapper),this.container=this.wrapper.find("ul").eq(0),this.bar=null;var a=this.container.children();this.length=a.length,this.container.width(100*this.length+"%"),this.bindPreviewEvent(a),this.setTimer(),e.initCallback&&e.initCallback(this.wrapper)},bindBarEvent:function(e){var t=this;void 0!==a&&(a.version.mobile||a.version.ios||a.version.android||a.version.windowsphone)||e.hover(function(){t._mouseIn=!0,clearInterval(t.timer),"hover"==t.params.mode&&t.slide($(this).index())},function(){t._mouseIn=!1,t.setTimer()}),e.click(function(){t.slide($(this).index())})},barHandler:function(e){var a=this.bar.find("[bar]").eq(e);a.hasClass("on")||(this.bar.find("[bar]").removeClass("on"),a.addClass("on"))},bindPreviewEvent:function(e){var a=this;e.hover(function(){clearInterval(a.timer)},function(){a.setTimer()})},slide:function(e){var a=this,t=this.params;this._mouseIn||a.setTimer(),this.container.stop(!0,!0).animate({"margin-left":100*-e+"%"},200),this.barHandler(e),this.pointer!=e&&t.slideCallback&&t.slideCallback(this.wrapper,e),this.pointer=e},setTimer:function(){var e=this,a=this.params;clearInterval(this.timer),0!=a.timeout&&1!=this.length&&(this.timer=setInterval(function(){e.next()},a.timeout||5e3))},next:function(){this.slide(this.pointer<this.length-1?this.pointer+1:0)},prev:function(){this.slide(this.pointer>0?this.pointer-1:this.length-1)},destroy:function(){clearInterval(this.timer),this.wrapper.remove()}},window.renderBangumiPromoteSlider=function(e,a,t){var i=t?t:"";if(e){var n=e.list?e.list:e.result;if(!n.length)return;var r={mode:"hover",parent:a?a:".bangumi-pmt-slider",wrapper:$('<div class="mini-preview-wrapper"><div class="mini-preview-list-wrapper"><ul class="mini-preview"></ul></div><div class="s-bottom"><div class="info"></div></div></div>'),renderCallback:function(e,a,t){var i=$('<div class="info-item"><a class="t" href="'+a.link+'" title="'+a.title+'" target="_blank">'+a.title+"</a></div>").appendTo($(".info",e));$("[preview] img",e).eq(t).attr("alt",a.title),0==t&&i.show()},slideCallback:function(e,a){$(".info .info-item",e).stop().hide(),$(".info",e).find(".info-item:eq("+a+")").stop(!0,!0).fadeIn(300)},item:function(e,a){return $('<li><a target="_blank" href="'+e.link+'"><img src="'+httpsChk(e.img)+'" alt="'+e.title+'"></a></li>')},bar:$('<ul class="slider-bar '+i+'"></ul>'),barContainer:".s-bottom",barItem:"<li><a></a></li>",dataSrc:{list:n}},s=new SliderController(r);s.init()}},window.httpsChk=function(e){var a=window.location.href.toLowerCase().indexOf("https")>-1;return a&&e.toLowerCase().indexOf("https")<0?e.replace("http","https"):e};var t="lazy-src";window.LazyLoad=function(e){var a=e.slice(0),i=a.length,n=function(){for(var e=$(window).scrollTop(),r=e+2*screen.height,s=0,l=a.length;s<l;s++){var o=$(a[s]);!o.attr("src")&&o.attr(t)&&o.offset().top!=e&&r>o.offset().top&&(o.attr("src",httpsChk(o.attr(t))),i--)}i<=0&&$(window).off("touchmove touchend scroll",n)};$(window).on("touchmove touchend scroll",n),n()},window.bfsImage=function(e,a,t){if(!e)return e;e=httpsChk(e);var i=/i[0-2]/;if(i.test(e)){var n,r="";if(e.indexOf("?")>=0&&(n=e.split("?"),e=n[0],r="?"+n[1]),e.indexOf("/bfs/")>=0||e.indexOf("/group1/")>=0){var i=/_+[0-9]+x[0-9]/;if(i.test(e))return e;var s=e.split("."),l=s[s.length-1];e+="_"+a+"x"+t+"."+l}else{var i=/\d+_\d+\//;i.test(e)&&(e=e.replace(i,"")),e=e.replace("com/","com/"+a+"_"+t+"/")}e+=r}return e}},,,,,,,,function(e,exports){function a(e){return e="string"==typeof e?parseInt(e):e,e?e>99999999?(e/1e8).toFixed(1)+"亿":e>9999?(e/1e4).toFixed(1)+"万":e<0?"--":e:"0"}function t(e){var a=new Date;return a.setTime(a.getTime()-864e5*parseInt(e)),a.toYMD()+","+(new Date).toYMD()}window.indexxxx=0;var i=new LazyImage;window.CreateArea=function(e){this.DEFAULT_PARAMS={AREA:'<div class="container-row"><div class="b-section-head"></div><div class="b-section-body"><div class="b-l"><div class="b-head"></div><div class="b-body"></div></div><div class="b-r"><div class="b-head"></div><div class="b-body"></div></div></div></div>'},this.api={},this.params={tid:null,container:null,area:this.DEFAULT_PARAMS.AREA,id:null,className:null,name:null,empty:!1,wrapper:null,addFunc:null,panes:null},this._extVars={},this.mergeParams(this.params,e);var a=!1;this.area=$(this.params.area),null!=e.id&&($("#"+e.id).length>0?(this.area=$("#"+e.id),a=!0):this.area.attr("id",e.id)),this.area.addClass(this.params.className),e.empty&&this.area.empty();var t,i='<div class="container-row cnt-m"></div>';e.wrapper?(this.area.attr("part",""),t=$("#"+e.wrapper).length>0?$("#"+e.wrapper):$(i).attr("id",e.wrapper),a||this.area.appendTo(t)):t=this.area,"undefined"==typeof t.attr("area")&&t.attr("area",this.params.id),a||(e.addFunc?e.addFunc(t):t.appendTo($(e.container)))},CreateArea.createTab=function(e,a){var a=a||{};return"undefined"!=typeof a.selected?e.items[a.selected].selected=!0:e.items[0].selected=!0,"undefined"!=typeof a.wrapper&&(e.wrapper=a.wrapper),{element:TabModule.create(e)}},CreateArea.createRankingTab=function(e){return CreateArea.createTab({items:[{name:"全部",attributes:{type:"hot"}},{name:"原创",attributes:{type:"hot_original"}}]},e)},CreateArea.createSelect=function(e,a){var a=a||{};return"undefined"!=typeof a.selected?e.items[a.selected].selected=!0:e.items[0].selected=!0,"undefined"!=typeof a.wrapper&&(e.wrapper=a.wrapper),{element:SelectModule.create(e)}},CreateArea.createRankingSelect=function(e,a){var t=[{name:"三日",attributes:{"data-value":"3","data-source":"//api.bilibili.com/x/web-interface/ranking/region?jsonp=jsonp&day=3&rid="+e}},{name:"一周",attributes:{"data-value":"7","data-source":"//api.bilibili.com/x/web-interface/ranking/region?jsonp=jsonp&day=7&rid="+e}}];return CreateArea.createSelect({items:t},a)},CreateArea.prototype={loadingDiv:'<div class="b-loading p-loading" loading></div>',data:{},queue:[],panes:[],bangumiDataBuffer:null,complete:!1,debug:!1,mergeParams:function(e,a){if("object"==typeof a){for(var t in e)a.hasOwnProperty(t)&&(e[t]=a[t]);return e}},init:function(){this._initPanes(this.params.panes)},_initPanes:function(e,a){if("object"==typeof e)for(var t in e){var i=this.mergeParams({_super:this,tid:null,template:null,templateTarget:null,wrapper:null,headClass:".b-head",bodyClass:".b-body",title:null,tab:null,tabTarget:null,tabChange:this.tabChange,selector:null,selectorTarget:null,selectChange:this.selectChange,push:!1,pushDataSource:null,onInitComplete:null,dataContainer:null,api:null,dataSource:null,jsonpCallback:null,data:null,TYPES:null,type:null,pagesize:null,slider:!1,readmore:!0,random:!1,renderBefore:this.renderBefore,render:null,renderComplete:this.renderComplete,fail:null,panes:null,reloadTimes:0,maxReloadTimes:3},e[t]);if(i._parent=a||this.area,this.onInit(i),null!=i.template){if($(i.template).length>1){var n=$(i.template);i.template=$("<div temp-wrapper></div>").append(n)}else i.template=$(i.template);i.templateTarget?i.template.appendTo(i._parent.find(i.templateTarget)):i.template.appendTo(i._parent)}else i.template=i._parent;null!=i.wrapper?i.wrapper=$(i.wrapper,i.template):i.wrapper=i.template,i.body=i.wrapper.find(i.bodyClass),0==i.body.length&&(i.body=i.wrapper),i.head=i.wrapper.find(i.headClass),i.title&&(i.head.length||(i.head=$("<div>").addClass(i.headClass.split(".").join(" ")).appendTo(i.wrapper)),i.head.html(i.title)),null!=i.dataContainer&&"object"!=typeof i.dataContainer?i.dataContainer=$(i.dataContainer).appendTo(i.body):null==i.dataContainer&&(i.dataContainer=i.body),"undefined"!=typeof n&&i.template.children().unwrap("[temp-wrapper]"),i.selector&&this.initSelector(i),i.tab&&this.initTab(i),i.selector||i.tab||"169"!=this.params.name||this.initPuppetry(i),i.push&&this.initPush(i),this.onInitComplete(i),this.panes.push(i),e[t]=i,i.panes&&this._initPanes(i.panes,i.wrapper)}},_callFunc:function(){var e=Array.prototype.slice.call(arguments),a=e.shift();"string"==typeof a?this[a].apply(this,e):"function"==typeof a&&a.apply(this,e)},onInit:function(e){},onInitComplete:function(e){var a=this;if(e.tab&&(e.dataContainer.find(".r-list-wrapper").length||"true"==e.dataContainer.attr("data-slider"))){e.renderBefore="renderHotBefore",e.tabChangeCallback="renderHotTabChange",e.selectChangeCallback="renderHotSelectChange";var t=e.dataContainer.find(".r-list-wrapper");t.length?t.children().length?e.dataContainer=t.children().eq(0):e.dataContainer=$("<ul>").addClass("rlist").appendTo(t):t=e.dataContainer.wrap('<div class="r-list-body"><div class="r-list-wrapper"></div></div>').parent(),e.body=e.wrapper.find(".r-list-body").css("overflow","hidden"),t.width("200%"),a._callFunc(e.tabChangeCallback,e,!1)}this._callFunc(e.onInitComplete,e)},initTab:function(e){var a=this;if("object"!=typeof e.tab){var t=$(e.tab).appendTo(e.wrapper.find(e.tabTarget));e.tab=t}else e.tab instanceof $||(e.tab=e.tab.element,e.tab.appendTo(e.wrapper.find(e.tabTarget)));a.callTabChange(e,!1),e.push===!0&&e.tab.children().first().attr("push",""),bindTab({item:e.tab,onChange:function(t,i){var n=i.isTrigger||!i.hasOwnProperty("which");e.selector?a.callTabChange(e,!1,!n):a.callTabChange(e,!0,!n),e.selector&&a.callSelectChange(e,!0,!1)}})},initSelector:function(e){var a=this;if("object"!=typeof e.selector){var t=$(e.selector).appendTo(e.wrapper.find(e.selectorTarget));e.selector=t}else e.selector instanceof $||(e.selector=e.selector.element,e.selector.appendTo(e.wrapper.find(e.selectorTarget)));bindSlt({item:e.selector,onChange:function(t,i){var n=i.isTrigger||!i.hasOwnProperty("which");a.callSelectChange(e,!0,!n)}}),a.callSelectChange(e,!1)},initPuppetry:function(e){e.dataSource="//bangumi.bilibili.com/api/get_season_by_tag_v2?tag_id=150"},callTabChange:function(e,a,t){var i=this;"function"==typeof e.tabChange?e.tabChange.call(this,e):"string"==typeof e.tabChange&&i[e.tabChange](e),e.tabChangeCallback&&i._callFunc(e.tabChangeCallback,e,t),a&&i.parseData(e)},tabChange:function(e){var a=e.tab.find("li.on");if(a.attr("data-source")?(e.dataSource=a.attr("data-source"),a.attr("data-jsonp")?e.jsonpCallback=a.attr("data-jsonp"):e.jsonpCallback=null):e.api&&e.api.selectBy&&(e.api.data[e.api.selectBy]=a.attr(e.api.selectBy)),a.attr("type")){var t=a.attr("type");null!=e.TYPES?e.type=e.TYPES[t]||t:e.type=t}},callSelectChange:function(e,a,t){var i=this;"function"==typeof e.selectChange?e.selectChange(e):"string"==typeof e.selectChange&&i[e.selectChange](e),e.selectChangeCallback&&i._callFunc(e.selectChangeCallback,e,t),a&&i.parseData(e)},selectChange:function(e){var a=e.selector.find("li[selected]");if(a.attr("data-source")?(e.dataSource=a.attr("data-source"),a.attr("data-jsonp")?e.jsonpCallback=a.attr("data-jsonp"):e.jsonpCallback=null):e.api&&e.api.selectBy&&(e.api.data[e.api.selectBy]=a.attr(e.api.selectBy)),a.attr("type")){var t=a.attr("type");null!=e.TYPES?e.type=e.TYPES[t]||t:e.type=t}},initPush:function(e){var a=this,t=e.pushContainer=$('<div class="read-push"><span class="icon-refresh"></span><span class="info"></span></div>').appendTo(e.head).hide(),i=e.tid||a.params.tid||0;e.lastPush=e.currentPush=0;var n="undefined"!=typeof window.pushTimer;if(n){var r=function(a){e.currentPush=a[i];var n=e.currentPush-e.lastPush;n>0&&t.show().find(".info").html("<b>"+n+"</b><em>条新动态</em>")};if("undefined"!=typeof window.pushData)e.lastPush=window.pushData[i],window.pushRefreshFunctions.push(r);else var s=setInterval(function(){"undefined"!=typeof window.pushData&&(clearInterval(s),e.lastPush=window.pushData[i],window.pushRefreshFunctions.push(r))},100)}else t.show().find(".info").html("点击刷新");t.click(function(){if(e.lastPush=e.currentPush,n&&t.hide(),e.pushDataSource)e.dataSource=e.pushDataSource;else{var r=e.pagesize?"&ps="+e.pagesize:"&ps=20";e.dataSource="//api.bilibili.com/x/web-interface/dynamic/region?jsonp=jsonp"+r+"&rid="+i}e.tab&&(e.tab.find("[push]").attr("data-source",e.dataSource),e.tab.children().removeClass("on"),e.tab.find("[push]").addClass("on")),a.parseData(e,!0)})},initApi:function(e){var a,t=this;if(null!=e.api){if(a=t.api[e.api.name],e.api.data){a.data||(a.data={});for(var i in e.api.data)a.data[i]=e.api.data[i]}e.pagesize&&e.api.data&&(a.data.pagesize=e.pagesize)}else a=null!=e.dataSource?e.dataSource:null;return a},makeQueryString:function(e){if(null==e||"string"==typeof e)return e;var a=e.url+"?",t=0;for(var i in e.data)e.data[i]&&(a+=(0==t?"":"&")+i+"="+e.data[i],t++);return a},load:function(e){var a=this;for(var t in e)!function(t){var i=e[t];null!=i.render&&a.parseData(i),i.panes&&a.load(i.panes)}(t);a.complete=!0},parseData:function(e,a){var t=this;t._callFunc(e.renderBefore,e),t.renderReadMore(e);var i,n=t.initApi(e);if(e.dataContainer.find(".b-loading").remove(),e.loadingDiv=$(t.loadingDiv).prependTo(e.dataContainer),"object"==typeof n)return void t.render(e,n);var r=t.makeQueryString(n);if(null!=r)if(t.data[r]&&a!==!0)e.loadingDiv.remove(),t.render(e,t.data[r]);else{if(t.queue[r]=t.queue[r]||[],t.queue[r].push({pane:e,callback:function(a){!a||a.code&&0!=a.code?a&&a.code==-101?e.loadingDiv.removeClass("b-loading").html('请先<a href="https://account.bilibili.com/login">登录</a>'):(t.reload(e),t._callFunc(e.fail,e)):(e.loadingDiv.remove(),t.render(e,a))}}),t.queue[r].length>1)return!1;i={url:r,data:e.data};var s=function(e){t.data[r]=e;for(var a;a=t.queue[r].shift();)a.callback(e)};e.jsonpCallback?(i.dataType="jsonp",i.jsonpCallback=e.jsonpCallback,i.cache=!0,window[e.jsonpCallback]=s):(i.dataType="json",i.success=s),$.ajax(i).fail(function(){for(var a;a=t.queue[r].shift();)t.reload(a.pane),t._callFunc(e.fail,e)})}},reload:function(e){var a=this;e.reloadTimes<e.maxReloadTimes?(setTimeout(function(){a.parseData(e,!0)},2e3),e.reloadTimes++):e.loadingDiv.addClass("b-load-fail").html("<span>加载失败,点击<a>重试</a></span>").find("a").one("click",function(){a.parseData(e,!0)})},render:function(e,a){var t=this;try{"function"==typeof e.render?e.render(e,a):"string"==typeof e.render&&t[e.render](e,a)}catch(i){}t._callFunc(e.renderComplete,e)},lazyImage:i,renderBefore:function(e){e.dataContainer.empty()},renderReadMore:function(e){var a,i,n=this,r=e.wrapper.find(".more-link, .b-link-more"),s=e.dataContainer,l=!1;if(r.length?(l=!0,a=r.find(">a")):(r=$("<div>").addClass("more-link"),a=$("<a>").html('查看更多<i class="b-icon b-icon-arrow-r"></i>').appendTo(r)),e.readmore!==!1){if("renderList"==e.render){r.removeClass("more-link").addClass("b-link-more");var o=e.tid||n.params.tid||0;a.attr("href",e.pageOpt[o].readmoreUrl).html('更多<i class="b-icon b-icon-arrow-r"></i>'),s=null,l||(e.push?r.insertBefore(e.pushContainer):r.appendTo(e.head))}else if("renderSubList"==e.render)"undefined"!=typeof n.area.find(".b-section-head .b-head-t a").attr("href")?a.attr("href",n.area.find(".b-section-head .b-head-t a").attr("href")):s=null;else if("renderIndexRanking"==e.render){var d="all",o=n.params.tid,p=3;13==o&&(d="bangumi"),e.tab&&"hot_original"==e.tab.find(".on").attr("type")&&(d="origin"),e.selector&&(p=e.selector.find("[selected=selected]").attr("data-value")),i="//www.bilibili.com/list/rank-"+n.params.name+".html#!order=hot&page=1&range="+t(p),a.attr({href:i,target:"_blank"}),e.dataContainer.parents(".r-list-body").length>0&&(s=e.dataContainer.parents(".r-list-body"))}else"renderSubRanking"==e.render?(i=n.area.find(".b-section-head .b-head-t a").attr("href"),e.selector&&(p=e.selector.find("[selected=selected]").attr("data-value")),i="undefined"==typeof i?"//www.bilibili.com/list/rank-"+n.params.name+".html#!order=hot&page=1&range="+t(p):i+"#!order=hot&page=1&range="+t(p),e.tab&&"hot_original"==e.tab.find(".on").attr("type")&&(i+="&original=true"),a.attr({href:i,target:"_blank"})):"string"==typeof e.readmore?a.attr({href:e.readmore,target:"_blank"}):s=null;null==s||l||r.insertAfter(s)}},renderComplete:function(e){var t=e._super,i=e.dataContainer;if("undefined"==typeof e.swifting||0==e.swifting){var n=function(e){Math.abs(160-e.width())<=2&&160!=e.width()&&e.css("width",160)};t.lazyImage.lazy(i,n)}if(i.find("[data-number]").each(function(e,t){$(t).text(a($(t).attr("data-number")))}),0==i.children().length)if(i[0]&&i[0].tagName&&"UL"==i[0].tagName){$('<li class="no-data"><span>没有数据</span></li>').appendTo(i)}else{$('<div class="no-data"><span>没有数据</span></div>').appendTo(i)}bindPOCoins2(e.dataContainer.find("[data-gk]")),$(".v .i .i1, .v .i .i2, .w_info .gk, .w_info .sc, .w_info .dm, .rlist .i .c1, .rlist .i .c2").html(function(){return formatFriendlyNumber($(this).html())})},_renderFragment:function(e,a,t,i){for(var n=$("<div />"),r=0;r<t;r++)if(void 0!==a[r]){var s=i.call(this,a[r],r);s&&n.append(s)}e.dataContainer.append(n.children())},renderList:function(e,t){var i;i=null!=e.type?"undefined"!=typeof t.newv&&"newv"!=e.type?"undefined"!=typeof t.newv[e.type]?t.newv[e.type].list:{}:"undefined"!=typeof t[e.type]?t[e.type].list||t[e.type]:t.list||t.data&&t.data.archives||t:t.list||t.data&&t.data.archives||t;var n=e.pagesize?e.pagesize:i.length;this._renderFragment(e,i,n,function(e){return"undefined"!=typeof e&&$('<li><div class="v"><a class="preview" href="//www.bilibili.com/video/av'+e.aid+'/" target="_blank" title="'+e.title+'">'+(e.badgepay===!0?'<div class="v-pay-tag">付费观看</div>':"")+'<div class="medal"></div><div class="original"></div><div class="border"></div><img data-img="'+httpsChk(e.pic)+'" alt="'+e.title+'"><div class="x"><b class="x2">'+window.utils.formatDuration(e.duration)+'</b></div></a><a href="//www.bilibili.com/video/av'+e.aid+'/" target="_blank" title="'+e.title+'"><div class="t">'+e.title+'</div><div class="i"><span><i class="b-icon b-icon-v-play"></i>'+a(e.play||e.stat&&e.stat.view||0)+'</span><span><i class="b-icon b-icon-v-dm"></i>'+a(e.video_review||e.stat&&e.stat.danmaku||0)+"</span></div></a></div></li>").attr(utils.parseCardProps(e));
})},renderPuppetry:function(e,a){var t;t=null!=e.type?"undefined"!=typeof a.newv&&"newv"!=e.type?"undefined"!=typeof a.newv[e.type]?a.newv[e.type].list:{}:"undefined"!=typeof a[e.type]?a[e.type].list||a[e.type]:a.list||a:a.result.list||a;var i=e.pagesize?e.pagesize:t.length;this._renderFragment(e,t,i,function(e){var a="";return a="0"==e.is_finish?"更新至第"+e.newest_ep_index+"话":"全"+e.total_count+"话","undefined"!=typeof e&&$('<li class="puppetry"><div class="v"><a class="preview" href="//bangumi.bilibili.com/anime/'+e.season_id+'" target="_blank" title="'+e.title+'">\t                                <img data-img="'+httpsChk(e.cover)+'" alt="'+e.title+'">\t                            </a>\t                            <a href="//bangumi.bilibili.com/anime/'+e.season_id+'" target="_blank" title="'+e.title+'">\t                                <div class="t">'+e.title+'</div>\t                                <div class="i">\t                                    <span>'+a+"</span>\t                                </div>\t                            </a>\t                        </div>\t                    </li>").attr(utils.parseCardProps(e))})},renderSubList:function(e,a){a instanceof $?e.dataContainer.html(a.html()):this.renderList(e,a)},renderHotBefore:function(e){var a=e.tab.children().length;e.wrapper.find(".r-list-wrapper>[loaded]").length==a&&(e.swifting=!0),e.wrapper.find(".r-list-wrapper>ul").length<a&&e.dataContainer.clone().removeAttr("loaded").empty().appendTo(e.wrapper.find(".r-list-wrapper")),e.dataContainer=e.wrapper.find(".r-list-wrapper>ul:eq("+e.tab.find(".on").index()+")")},renderHotTabChange:function(e,a){var t,i=e.dataContainer.index(),n=e.tab.find(".on").index(),r=e.dataContainer.parents(".r-list-wrapper"),s=e.tab.children().length;r.find(">ul").show().not(":eq("+i+"), :eq("+n+")").hide(),t=i<n?1:0,s>2&&(i<n&&n==s-1?r.css("margin-left","0%"):i>n&&0==n&&r.css("margin-left","-100%")),e.dataContainer.parents(".r-list-wrapper").animate({"margin-left":-100*t+"%"},a!==!1?200:0)},renderHotSelectChange:function(e){e.wrapper.find(".r-list-wrapper>ul").empty().removeAttr("loaded"),e.swifting=!1},renderRanking:function(e,t,i,n){var r;r=t.data;var s=e.pagesize?e.pagesize:r.length;this._renderFragment(e,r,s,function(e,t){if("undefined"==typeof e)return!1;var n=$('<li><i class="number">'+(t+1)+'</i><div class="preview"><a href="//www.bilibili.com/video/av'+e.aid+'/" title="'+e.title+" 播放:"+e.play+" "+e.duration+'" target="_blank"><img data-img="'+httpsChk(e.pic)+'" alt="'+e.title+'" /></a></div><a class="rl-info" href="//www.bilibili.com/video/av'+e.aid+'/" title="'+e.title+" 播放:"+e.play+" "+e.duration+'" target="_blank"><div class="title t">'+e.title+'</div><div class="i"><b class="pts" title="综合评分: '+a(e.pts)+'">综合评分：'+a(e.pts)+"</b></div></a></li>").attr(utils.parseCardProps(e));return"undefined"!=typeof i&&i(n,t),n}),bindPOCoins2(e.dataContainer.find("li")),"undefined"!=typeof n&&n(e)},renderIndexRanking:function(e,a){var t=this;e.dataContainer.attr("loaded")||t.renderRanking(e,a,function(e,a){a<1?e.addClass("on"):e.addClass("off"),a<3&&e.find(".number").addClass("n"+(a+1))},function(e){e.tab&&e.dataContainer.attr("loaded","true")})},renderSubRanking:function(e,a){var t=this;t.renderRanking(e,a,function(e,a){a<3?e.addClass("on"):e.addClass("off"),a<3&&e.find(".number").addClass("n"+(a+1))})},renderTopList:function(e,a){a=a.recommend||a;var t=a.list,i=e.pagesize?e.pagesize:t.length;this._renderFragment(e,t,i,function(e,a){return"undefined"!=typeof e&&$('<li><div class="v-item"><a href="//www.bilibili.com/video/av'+e.aid+'/" target="_blank" title="'+e.title+'">'+(e.badgepay===!0?'<div class="v-pay-tag">付费观看</div>':"")+'<div class="medal"></div><div class="original"></div><div class="preview"><img data-img="'+httpsChk(e.pic)+'" alt="'+e.title+'" /></div><div class="mask"></div><div class="play-icon"></div><div class="info"><div class="t">'+e.title+'</div><p class="up">up主：'+e.author+'</p><p class="play">播放：'+e.play+"</p></div></a></div></li>")})},renderAds:function(e,a){var t=a.item;if(!a.zone.enabled)return void e.dataContainer.remove();var i=e.pagesize?e.pagesize:t.length;if(e.random){var n=t.slice(),r=n.length;t=[];for(var s=0;s<r;s++){var l=Math.floor(Math.random()*n.length);t.push(n[l]),n.splice(l,1)}}for(var o=0;o<i;o++){var d=t[o];if("undefined"!=typeof d){var p=$('<div class="pmt-item"><a href="'+httpsChk(d.link)+'" target="_blank"><img src="'+httpsChk(d.image)+'"></a></div>').appendTo(e.dataContainer);1!=d.width&&p.addClass("pmt-mid")}}},renderLinkList:function(e,a){var t=a.item;if(!a.zone.enabled)return void e.dataContainer.remove();for(var i=e.pagesize?e.pagesize:t.length,n=0;n<i;n++){0==n&&e.dataContainer.hasClass("pmt-inline")&&$("<i>").addClass("pmt-icon").prependTo(e.dataContainer);var r=t[n];if("undefined"!=typeof r){$('<div class="pmt-link"><a href="'+httpsChk(r.link)+'" target="_blank" title="'+r.title+'">'+r.title+"</a></div>").appendTo(e.dataContainer)}}},renderBangumiPromote:function(e,a){for(var t=a.result,i=e.pagesize?e.pagesize:-1,n=0;n<t.length;n++){var r=t[n];if(r.img=bfsImage(r.img,picSizeBFS.finalRecomSize.width,picSizeBFS.finalRecomSize.height),i!=-1&&n>=i)break;if("undefined"!=typeof r&&"object"==typeof r){var s;if(s=r.badge?'<p class="num" style="border-radius: 0 0 0 4px;">'+r.badge+"</p>":"",n<2)var l=$('<li class="ipt"><div class="r-item"><a class="preview" href="'+httpsChk(r.link)+'" target="_blank" title="'+r.title+'"><img data-img="'+httpsChk(r.img)+'" alt="'+r.title+'" />'+s+'<div class="btm-info" href="'+httpsChk(r.link)+'" target="_blank" title="'+r.title+'"><p class="t"><span>'+r.title+'</span></p><p class="play">'+r.desc+"</p></div></a></div></li>");else var l=$('<li><div class="r-item"><a class="preview" href="'+httpsChk(r.link)+'" target="_blank" title="'+r.title+'"><img data-img="'+httpsChk(r.img)+'" alt="'+r.title+'" /></a><div class="r-i"><a href="'+httpsChk(r.link)+'" target="_blank" title="'+r.title+'"><p class="t"><span>'+r.title+"</span></p></a>"+s+"</div></div></li>");l.attr("data-seasonid",r.season_id).appendTo(e.dataContainer)}}},renderBangumiPromoteSlider:function(e,a){var t=a.list;e.pagesize?e.pagesize:-1;if(t.length){var i={mode:"hover",parent:e.dataContainer,wrapper:$('<div class="mini-preview-wrapper"><div class="mini-preview-list-wrapper"><ul class="mini-preview"></ul></div><div class="s-bottom"><div class="info"></div></div></div>'),renderCallback:function(e,a,t){var i=$('<div class="info-item"><a class="t" href="'+httpsChk(a.link)+'" title="'+a.title+'" target="_blank">'+a.title+"</a></div>").appendTo($(".info",e));$("[preview] img",e).eq(t).attr("alt",a.title),0==t&&i.show()},slideCallback:function(e,a){$(".info .info-item",e).stop().hide(),$(".info",e).find(".info-item:eq("+a+")").stop(!0,!0).fadeIn(300)},item:function(e,a){return $('<li><a target="_blank" href="'+httpsChk(e.link)+'"><img src="'+httpsChk(e.img)+'" alt="'+e.title+'"></a></li>')},bar:$('<ul id="topic_slider" class="slider-bar"></ul>'),barContainer:".s-bottom",barItem:"<li><a></a></li>",dataSrc:{list:t}},n=new SliderController(i);n.init()}},renderBangumiIndexPromote:function(e,a){for(var t=a.result,i=e.pagesize?e.pagesize:-1,n=0;n<t.length;n++){var r=t[n];if(i!=-1&&n>=i)break;if("undefined"!=typeof r&&"object"==typeof r){var s;s="0"==r.is_finish?'<div class="bangumi-state-index">更新'+r.newest_ep_index+(parseInt(a.newest_ep_index)?"话":"")+"</div>":'<div class="bangumi-state-index">全'+r.total_count+"话</div>";var l=$('<li><div class="pmt-item"><a class="preview" href="/anime/'+r.season_id+'" target="_blank" title="'+r.title+'"><img src="'+httpsChk(r.squareCover)+'" alt="'+r.title+'" />'+s+'</a><a class="t" href="/anime/'+r.season_id+'" target="_blank" title="'+r.title+'">'+r.title+"</a></div></li>");l.attr("data-seasonid",r.season_id).appendTo(e.dataContainer)}}},renderBangumiCalendar:function(e,a){function t(a){a.square_cover=bfsImage(a.square_cover,picSizeBFS.lastUpdateSize.width,picSizeBFS.lastUpdateSize.height);var t=$('<li data-seasonid="'+a.season_id+'"'+(a["new"]?' class="new"':"")+'><div class="c-item"><a class="preview" href="'+httpsChk(a.url)+'" target="_blank" title="'+a.title+'"><img data-img="'+httpsChk(a.square_cover)+'" alt="'+a.title+'" /></a><div class="r-i"><a href="'+httpsChk(a.url)+'" target="_blank" title="'+a.title+'"><p class="t"><span>'+a.title+'</span></p></a><p class="num">更新至<span>'+a.bgmcount+(parseInt(a.bgmcount)?"话":"")+"</span></p></div></div></li>");t.appendTo(e.dataContainer)}var i=this,n=e.tab.find("li.on").attr("data-day");e.tab.attr("data-initialized",!0),e.tab.find("li").each(function(e,a){var t=$(a);t.attr("data-day")==n&&"n"!=t.attr("data-day")?t.find("span").text("周"+t.attr("data-name")):t.find("span").text(t.attr("data-name"))});var r=12;$('<div class="c-bottom clearfix"></div>').insertAfter(e.dataContainer);if(e.dataContainer.parents(".c-list-scroll-wrp").length||e.dataContainer.wrap('<div class="c-list-scroll-wrp custom-scrollbar"><div class="c-list-scroll-content"></div></div>'),null==i.bangumiDataBuffer){i.bangumiDataBuffer={};for(var s=a.list||a.bangumi.list,l=e.pagesize&&e.pagesize>=s.length?e.pagesize:s.length,o=0;o<l;o++)o<r&&($.isArray(i.bangumiDataBuffer.n)?i.bangumiDataBuffer.n.push(s[o]):i.bangumiDataBuffer.n=[s[o]]),"undefined"==typeof i.bangumiDataBuffer[s[o].weekday]&&(i.bangumiDataBuffer[s[o].weekday]=[]),i.bangumiDataBuffer[s[o].weekday].push(s[o]);for(var d in i.bangumiDataBuffer)"n"!=d&&i.bangumiDataBuffer[d].sort(function(e,a){return a.favorites-e.favorites});if(a.week_icon)for(var o in a.week_icon)e.tab.find("li[data-day="+a.week_icon[o].weekday+"]").find(".b-icon-bangumi-w").css("background","none").html($("<img>").addClass("bangumi-img-w").attr({src:a.week_icon[o].icon}))}if(i.bangumiDataBuffer[n].length)for(var p=0;p<i.bangumiDataBuffer[n].length;p++){var c=i.bangumiDataBuffer[n][p];t(c)}else $('<div class="no-data"></div>').appendTo(e.dataContainer);e.dataContainer.css({opacity:0}),e.dataContainer.animate({opacity:1},200),i.bangumiDataBuffer[n].length>r},renderRecommend:function(e,a){var t=a.list;e.pagesize?e.pagesize:t.length;for(var i in t){var n=t[i];if("object"==typeof n){var r=n.last_recommend[0],s=$('<li><div class="rm-item"><a class="preview" href="//www.bilibili.com/video/av'+n.aid+'/" target="_blank" title="'+n.title+'"><img data-img="'+httpsChk(n.pic)+'" alt="'+n.title+'" /></a><div class="rm-item-info"><a class="face" card="'+r.uname+'" href="//space.bilibili.com/'+r.mid+'" target="_blank"><img data-img="'+httpsChk(r.face)+'"></a><a class="name" card="'+r.uname+'" href="//space.bilibili.com/'+r.mid+'" target="_blank">'+r.uname+'</a><span>推荐</span></div><a class="t" href="//www.bilibili.com/video/av'+n.aid+'/" target="_blank" title="'+n.title+'">'+n.title+"</a></div></li>").attr(utils.parseCardProps(n));s.appendTo(e.dataContainer)}}},renderHotspot:function(e,a){var t=a.vari_new.list,i=e.pagesize?e.pagesize:t.length;this._renderFragment(e,t,i,function(e){return $('<li><div class="rm-item"><a class="preview" href="//www.bilibili.com/video/av'+e.aid+'/" target="_blank" title="'+e.title+'"><img data-img="'+httpsChk(e.pic)+'" alt="'+e.title+'" /></a><div class="rm-item-info"><a class="face" card="'+e.author+'" href="//space.bilibili.com/'+e.mid+'" target="_blank"><img data-img="'+httpsChk(e.face)+'"></a><a class="name" card="'+e.author+'" href="//space.bilibili.com/'+e.mid+'" target="_blank">'+e.author+'</a><span>投稿了</span></div><a class="t" href="//www.bilibili.com/video/av'+e.aid+'/" target="_blank" title="'+e.title+'">'+e.title+"</a></div></li>").attr(utils.parseCardProps(e))})},renderHotspotRanking:function(e,a){var t=a.vari_reco.list,i=e.pagesize?e.pagesize:t.length;this._renderFragment(e,t,i,function(e,a){return $('<li><a class="hs-item" href="'+httpsChk(e.url)+'" target="_blank" title="'+e.title+'"><i class="number n'+(a+1)+'">'+(a+1)+'</i><div class="hs-t">'+e.title+"</div></a></li>")})},renderLiveList:function(e,t){var i=t.data.recommend,n=e.pagesize?e.pagesize:i.length;this.area.find("#live_online_state").html("当前共有<em>"+(t.data.online_total||"--")+"</em>个在线直播");var r=this.area.find(".live-pmt-item img");n<10?(this.area.addClass("area-live-collapsed"),r.attr("data-simg")&&r.attr("src",r.attr("data-simg"))):(this.area.removeClass("area-live-collapsed"),r.attr("data-limg")&&r.attr("src",r.attr("data-limg"))),this._renderFragment(e,i,n,function(e,t){var i=$('<li><div class="lv-item"><a class="lv-preview" href="'+httpsChk(e.link)+'" target="_blank" title="'+e.title+'"><img data-img="'+httpsChk(e.pic)+'" alt="'+e.title+'" /><div class="lv-mask"></div><div class="b-icon-live-play"><i class="lv-onair-dot"></i><span class="lv-onair-txt">LIVE</span></div></a><a href="'+httpsChk(e.link)+'" target="_blank"><div class="lv-room"><div class="lv-face"><img data-img="'+httpsChk(e.face)+'"></div><div class="lv-t" title="'+e.title+'">'+e.title+'</div></div><div class="lv-info"><div class="lv-host" title="'+e.uname+'"><i class="b-icon b-icon-live-host"></i>'+e.uname+'</div><div class="lv-online"><i class="b-icon b-icon-live-online"></i>'+a(e.online)+"</div></div></a></div></li>");return i})},renderBangumiHotspot:function(e,a){var t=a.result,i=e.pagesize?e.pagesize:t.length;this._renderFragment(e,t,i,function(e,a){e.img=bfsImage(e.img,picSizeBFS.baseSize.width,picSizeBFS.baseSize.height);var t=$('<li><div class="v"><a class="preview" href="'+httpsChk(e.link)+'" target="_blank" title="'+e.title+'"><div class="border"></div><img data-img="'+httpsChk(e.img)+'" alt="'+e.title+'"></a><a href="'+httpsChk(e.link)+'" target="_blank" title="'+e.title+'"><div class="t">'+e.title+'</div><div class="tc" title="'+e.desc+'">'+e.desc+"</div></a></div></li>");return e.badge&&$("<div>").addClass("pmt-tag").html(e.badge).appendTo(t.find(".preview")),e.desc||t.find(".t").addClass("expand"),t})},renderPromote:function(e,a){var t=e.pagesize,i=0,n=$("<div />");this._extVars.promoteList||($.isArray(a.list)?this._extVars.promoteList=a.list.slice():this._extVars.promoteList=$.extend(!0,{},a.list));var r=this._extVars.promoteList;for(var s in r){var l,o=r[s];if($.isArray(o)){var d=Math.floor(Math.random()*o.length);l=o.splice(d,1)[0],0==o.length&&(this._extVars.promoteList[s]=a.list[s].slice())}else l=o;if("undefined"!=typeof l&&r.hasOwnProperty(s)){var p=$('<li><div class="v"><a class="preview" href="//www.bilibili.com/video/av'+l.aid+'/?tg" target="_blank" title="'+l.title+'"><div class="border"></div><img data-img="'+httpsChk(l.pic)+'" alt="'+l.title+'" /><div class="x"><b class="x2">'+window.utils.formatDuration(l.duration)+'</b></div></a><a href="//www.bilibili.com/video/av'+l.aid+'/?tg" target="_blank" title="'+l.title+'"><div class="t">'+l.title+"</div></a></div></li>").attr(utils.parseCardProps(l));if(l.ads&&$("<div>").addClass("pmt-tag").html("广告").appendTo(p.find(".preview")),p.appendTo(n),i++,i>=t)break}}e.dataContainer.append(n.html())}}},function(e,exports,a){function t(e){var a=e[window.tid].url;0!=$("#list_bangumi_new").length&&$.getJSON(a,function(a){var t=$("#list_bangumi_new > .bgmbox > ul");$("#list_bangumi_new > .bgmbox").css("overflow","visible"),t.empty();for(var n=a.result||a,r=0;r<n.length;r++)n[r].square_cover=bfsImage(n[r].square_cover,picSizeBFS.lastUpdateSize.width,picSizeBFS.lastUpdateSize.height);t.append(i({data:n})),lazyImage.lazy(t);var s=e[window.tid].length;if(n.length>s){var l=$('<div class="b-toggle-block bgmbox-bottom"><div class="b-toggle-btn" id="btn_bgm_show_more"><span>全部</span><i class="b-icon b-icon-toggle-down"></i></div></div>').appendTo("#list_bangumi_new > .bgmbox");$("#btn_bgm_show_more",l).click(function(){$(this).hasClass("active")?($(this).removeClass("active").html('<span>全部</span><i class="b-icon b-icon-toggle-down"></i>'),t.removeClass("c-list-expand"),$(window).scrollTop($("#list_bangumi_new").offset().top-50)):($(this).addClass("active").html('<span>收起</span><i class="b-icon b-icon-toggle-up"></i>'),t.addClass("c-list-expand"))})}})}var i=a(14),n={13:{url:"/api/timeline_v2_global",length:12},167:{url:"/api/timeline_v2_cn",length:8}};t(n)},function(e,exports,a){var t=a(2);e.exports=function(e){var a,i=[],n=e||{};return function(e,n,r){(function(){var r=e;if("number"==typeof r.length)for(var s=0,l=r.length;s<l;s++){var o=r[s];if(o["new"]?i.push('<li data-seasonid="'+t.escape(null==(a=o.season_id)?"":a)+'" class="new">'):i.push('<li data-seasonid="'+t.escape(null==(a=o.season_id)?"":a)+'">'),i.push('<div class="c-item"><a'+t.attr("href","/anime/"+o.season_id,!0,!0)+' target="_blank"'+t.attr("title",""+o.title,!0,!0)+' class="preview"><img'+t.attr("data-img",""+n(o.square_cover),!0,!0)+t.attr("alt",""+o.title,!0,!0)+'></a><div class="r-i"><p class="t"><a'+t.attr("href","/anime/"+o.season_id,!0,!0)+' target="_blank"'+t.attr("title",""+o.title,!0,!0)+"><span>"+t.escape(null==(a=o.title)?"":a)+"</span></a></p>"),"-1"!=o.bgmcount){i.push('<p class="num">更新至<a'+t.attr("href","//bangumi.bilibili.com/anime/"+o.season_id+"/play#"+o.ep_id,!0,!0)+' target="_blank">');var d=/^[-]?[0-9]+$/;d.test(o.bgmcount)?i.push(""+t.escape(null==(a=o.bgmcount)?"":a)+"话"):i.push(""+t.escape(null==(a=o.bgmcount)?"":a)),i.push("</a></p>")}else i.push('<p class="num">即将开播</p>');i.push("</div></div></li>")}else{var l=0;for(var s in r){l++;var o=r[s];if(o["new"]?i.push('<li data-seasonid="'+t.escape(null==(a=o.season_id)?"":a)+'" class="new">'):i.push('<li data-seasonid="'+t.escape(null==(a=o.season_id)?"":a)+'">'),i.push('<div class="c-item"><a'+t.attr("href","/anime/"+o.season_id,!0,!0)+' target="_blank"'+t.attr("title",""+o.title,!0,!0)+' class="preview"><img'+t.attr("data-img",""+n(o.square_cover),!0,!0)+t.attr("alt",""+o.title,!0,!0)+'></a><div class="r-i"><p class="t"><a'+t.attr("href","/anime/"+o.season_id,!0,!0)+' target="_blank"'+t.attr("title",""+o.title,!0,!0)+"><span>"+t.escape(null==(a=o.title)?"":a)+"</span></a></p>"),"-1"!=o.bgmcount){i.push('<p class="num">更新至<a'+t.attr("href","//bangumi.bilibili.com/anime/"+o.season_id+"/play#"+o.ep_id,!0,!0)+' target="_blank">');var d=/^[-]?[0-9]+$/;d.test(o.bgmcount)?i.push(""+t.escape(null==(a=o.bgmcount)?"":a)+"话"):i.push(""+t.escape(null==(a=o.bgmcount)?"":a)),i.push("</a></p>")}else i.push('<p class="num">即将开播</p>');i.push("</div></div></li>")}}}).call(this)}.call(this,"data"in n?n.data:"undefined"!=typeof data?data:void 0,"httpsChk"in n?n.httpsChk:"undefined"!=typeof httpsChk?httpsChk:void 0,"undefined"in n?n.undefined:void 0),i.join("")}},function(e,exports,a){function t(e){for(var a in e)if(e.hasOwnProperty(a))return!1;return!0}function i(e,a){return a=a||window.tid,e?void $.ajax({url:s+"/x/web-show/res/loc?pf=0&id="+e,data:{jsonp:"jsonp"},type:"GET",dataType:"jsonp",jsonpCallback:"getHotAdCallback",success:function(i){var n={},r=i.data;if(0!==i.code||t(r)||""===r.image||""===r.url)createBanner(a,n);else{for(var s in r){var o=$.extend({},r[s],{resource_id:e});if(o.pos_num&&2===parseInt(o.pos_num,10)){n.img=o.pic,n.link=o.url,n.simg=o.litpic,n.title=o.name,n.loc_id=e,n.id=o.id,n.is_ad_loc=o.is_ad_loc,n.is_ad=o.is_ad,l[e]=o;try{if(o.is_ad_loc){var d=window.BiliCm&&window.BiliCm.base||{};d&&d.send&&$.isFunction(d.send)&&d.send("",o)}}catch(p){}window.adDatasLoc[e]=o}}t(n)?createBanner(a,n):createBanner(a,n)}},error:function(){}}):void createBanner(a)}function n(){var e=window.tid;e?i(d[e],e):window.location.href.indexOf("33")>0&&i(d.bm)}function r(e){var a=window.BiliCm&&window.BiliCm.base||{};if(e&&!o[e.request_id+e.src_id+e.creative_id]&&($.isFunction(a.send)&&(o[e.request_id+e.src_id+e.creative_id]=e,a.send("show",e)),e.show_url)){var t=new Image(1,1);t.src=e.show_url,t.onload=t.onerror=function(){t=null}}}var s=(a(16),"//api.bilibili.com");window.adDatasLoc=window.adDatasLoc||{};var l={},o={},d={13:"106",167:"1966",23:"112",11:"118",bm:"395"},p={106:"108",1966:"1968",395:"397",118:"120",112:"114"};$(document).ready(function($){n()}),e.exports.ad_show=function(e){var a=$(".topic-preview-wrapper"),t=$(window),i=$.extend({},l[e],{resource_id:e,src_id:p[e]}),n=a.height(),s=a.offset().top,o=t.scrollTop(),d=o+t.height();s>o-n/2&&s+n/2<d&&r(i)}},function(e,exports,a){var t=a(2);e.exports=function(e){var a=[],i=e||{};return function(e,i){a.push("<div"+t.attr("data-name",""+e.name,!0,!0)+"><a"+t.attr("href",""+i(e.url),!0,!0)+' target="_blank" style="display:block;position:relative;" rel="nofollow">'),e.is_ad_loc&&e.is_ad&&a.push('<img src="//static.hdslb.com/images/base/ad.png" style="width:32px;height:20px;margin-right:5px;position:absolute;bottom:2px;left:2px;">'),a.push("<img"+t.attr("src",""+i(e.pic),!0,!0)+t.attr("alt",""+e.name,!0,!0)+' style="width:100%;height:100%;"></a></div>')}.call(this,"data"in i?i.data:"undefined"!=typeof data?data:void 0,"httpsChk"in i?i.httpsChk:"undefined"!=typeof httpsChk?httpsChk:void 0),a.join("")}},function(e,exports){$(function(){function e(e,a,t){var i=e.parents("li").index()==-1?e.parent().index():e.parents("li").index();i+=1;var n=e.find("img").attr("alt")||e.find("img").data("alt")||e.text(),r=e.attr("href");r=t?t+r:r,rec_rp("event",analysisOpt[tid].recrpStr.pageClick,{id:a,pos:i,title:n,url:r,isauto:"0"})}function a(e,a){var t=e.parents(".container-row").attr("area");rec_rp("event",analysisOpt[tid].recrpStr.pageAreaClick,{tid:t,id:a})}function t(e){var a=/\d+/,t=e.parents("li"),i=t.parents(".container-row").attr("area"),n=e.attr("href").match(a),r=t.find(".t").text(),s=t.index()+1,l=e.parents(".container-row").find(".b-slt-tab li.on").index()+1;rec_rp("event",analysisOpt[tid].recrpStr.pageAreaVideoClick,{tid:i,avid:n[0],title:r,pos:s,type:l})}function i(e){var a,t=/\d+/,i=e.parents("li"),n=i.parents(".container-row").attr("area"),r=e.attr("href").match(t),s=i.find(".t").text(),l=i.index()+1,o=e.parents(".container-row").find(".b-slt .txt").text();a="一周"===o?1:2,rec_rp("event",analysisOpt[tid].recrpStr.pageAreaRankClick,{tid:n,avid:r[0],title:s,pos:l,type:a})}window.analysisOpt={13:{opeId:{topic:"1",hot:"2",end:"3",last:"4"},entryId:{lianzai:"1",wanjie:"2",guochan:"3",zixun:"4",yanshen:"5",index:"6",timeline:"7",fangsong:"11",more:"12"},secModuleId:{biaoti:"1",xindongtai:"2",tougao:"3",dongtai:"4",more:"5",rankweek:"6",rankdays:"11",rankmore:"12"},recrpStr:{pageClick:"web_bangumi_anime_index_page_click",pageEntrance:"web_bangumi_anime_index_page_entrance",pageAreaClick:"web_bangumi_anime_index_page_area_click",pageAreaVideoClick:"web_bangumi_anime_index_page_area_video_click",pageAreaRankClick:"web_bangumi_anime_index_page_area_rank_click"}},167:{opeId:{topic:"1",hot:"2",last:"4",budaixi:"5"},entryId:{guochan:"1",guochuang:"2",budaixi:"3",zixun:"4",index:"6",timeline:"7",fangsong:"11",more:"12"},secModuleId:{biaoti:"1",xindongtai:"2",tougao:"3",dongtai:"4",more:"5",rankweek:"6",rankdays:"11",rankmore:"12"},recrpStr:{pageClick:"web_guochuang_anime_index_page_click",pageEntrance:"web_guochuang_anime_index_page_entrance",pageAreaClick:"web_guochuang_anime_index_page_area_click",pageAreaVideoClick:"web_guochuang_anime_index_page_area_video_click",pageAreaRankClick:"web_guochuang_anime_index_page_area_rank_click"}}},$("body").on("click",".topic-preview-wrapper a",function(){e($(this),analysisOpt[tid].opeId.topic)}),$("body").on("click",".top-list.hotspot a",function(){e($(this),analysisOpt[tid].opeId.hot)}),$("body").on("click","li.puppetry a",function(){e($(this),analysisOpt[tid].opeId.budaixi)}),$(".r-list-pmt.simple.sub").on("click","a",function(){e($(this),analysisOpt[tid].opeId.end)}),$(".bgm-calendar.bgmbox").on("click","a",function(){var a="//bangumi.bilibili.com/";e($(this),analysisOpt[tid].opeId.last,a)}),$(".n_num li").on("click","a",function(){var e,a=$(this).parents("li").attr("tid");if(a)switch(a){case"13":return;case"33":e=analysisOpt[tid].entryId.lianzai;break;case"32":e=analysisOpt[tid].entryId.wanjie;break;case"51":e=analysisOpt[tid].entryId.zixun;break;case"152":e=analysisOpt[tid].entryId.yanshen;break;case"167":return;case"153":e=analysisOpt[tid].entryId.guochan;break;case"168":e=analysisOpt[tid].entryId.guochuang;break;case"169":e=analysisOpt[tid].entryId.budaixi;break;case"170":e=analysisOpt[tid].entryId.zixun}else{var t=$(this).parents("li").index();5==t?e=analysisOpt[tid].entryId.timeline:6==t&&(e=analysisOpt[tid].entryId.index)}rec_rp("event",analysisOpt[tid].recrpStr.pageEntrance,{id:e})}),$("body").on("click",".right.a-link",function(){rec_rp("event",analysisOpt[tid].recrpStr.pageEntrance,{id:analysisOpt[tid].entryId.fangsong})}),$(".bgm-calendar.bgmbox").on("click",".b-toggle-btn",function(){rec_rp("event",analysisOpt[tid].recrpStr.pageEntrance,{id:analysisOpt[tid].entryId.more})}),$("body").on("click",".b-head-t a",function(){a($(this),analysisOpt[tid].secModuleId.biaoti)}).on("click",".b-slt-tab li",function(){0==$(this).index()?a($(this),analysisOpt[tid].secModuleId.xindongtai):a($(this),analysisOpt[tid].secModuleId.tougao)}).on("click",".read-push",function(){a($(this),analysisOpt[tid].secModuleId.dongtai)}).on("click",".b-link-more",function(){a($(this),analysisOpt[tid].secModuleId.more)}).on("click",".more-link",function(e){a($(this),analysisOpt[tid].secModuleId.rankmore)}),setTimeout(function(){$(".b-slt .list li").on("click",function(){3==$(this).attr("data-value")?a($(this),analysisOpt[tid].secModuleId.rankdays):a($(this),analysisOpt[tid].secModuleId.rankweek)})},500),$("body").on("click","[area] ul.v-list li a:not([area] ul.v-list li.puppetry a)",function(){t($(this))}),$("body").on("click",".rlist li a",function(){i($(this))})})}]);